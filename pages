import streamlit as st
import random
import time

st.title("üéæ Live Tennis Total Points Tracker")

# This part refreshes automatically every 15 seconds
@st.fragment(run_every="15s")
def live_tennis_props():
    st.subheader("Match Status: Live üü¢")
    
    # Simulate pre-match line and live data
    pre_match_line = 18.5 # O/U 18.5 games projected
    player_a_games = random.randint(5, 10)
    player_b_games = random.randint(4, 9)
    current_total_games = player_a_games + player_b_games
    
    # Simulate an odds change (e.g., U16.5 because the match is shorter than expected)
    live_line = 16.5

    # Determine if it's looking good for the 'Over' bet
    pace_needed = pre_match_line / 3 # Assuming best of 3 sets for average
    
    st.write(f"Current Total Games: **{current_total_games}**")

    col1, col2, col3 = st.columns(3)
    col1.metric("Pre-Match O/U Line", f"{pre_match_line}")
    col2.metric("Live O/U Line", f"{live_line}")

    # Show the "Good or Not" Status
    if current_total_games > pre_match_line:
        col3.metric("Pace Indicator", "üî• OVER PACE", delta_color="normal")
    else:
        col3.metric("Pace Indicator", "‚ö†Ô∏è UNDER PACE", delta_color="inverse")
        
    st.caption(f"Last updated: {time.strftime('%H:%M:%S')}")

live_tennis_props()
